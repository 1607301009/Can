C51 COMPILER V9.60.0.0   MAIN                                                              06/29/2021 01:09:19 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /** ç”¨ è¿ç»­è¯» å’Œ åˆ†é¡µå†™ æ¨¡å¼è®¿é—® EEPROMï¼Œå¹¶ä¸”ä¾æ¬¡åŠ  1 åŠ  2 åŠ  3...æœ€åå°†ç»“æœå›å†
             -™è‡³åŸåœ°å€ï¼Œæ­¤å¤„çœç•¥ Lcd1602.c å’Œ I2C.c */
   2          #include <reg52.h>
   3          
   4          extern void E2Read(unsigned char *buf, unsigned char addr, unsigned char len);
   5          extern void E2Write(unsigned char *buf, unsigned char addr, unsigned char len);
   6          void MemToStr(unsigned char *str, unsigned char *src, unsigned char len);
   7          
   8          void main() {
   9   1        unsigned char i;
  10   1        unsigned char buf[5];
  11   1        unsigned char str[20];
  12   1      
  13   1        E2Read(buf, 0x8E, sizeof(buf));  // ä» EEPROM è¯»å–ä¸€æ®µæ•°æ®
  14   1        MemToStr(str, buf, sizeof(buf)); // è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²
  15   1      
  16   1        /* æ•°æ®ä¾æ¬¡ç´¯åŠ  1, 2, 3... */
  17   1        for (i = 0; i < sizeof(buf); i++) {
  18   2          buf[i] = buf[i] + 1 + i;
  19   2        }
  20   1        E2Write(buf, 0x8E, sizeof(buf)); // å°†ç»“æœå†™å› EEPROM
  21   1        while (1);
  22   1      }
  23          
  24          /* å°†ä¸€æ®µå†…å­˜æ•°æ®è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå‚æ•° str æ˜¯å­—ç¬¦ä¸²æŒ‡é’ˆï¼Œå‚æ•° src æ˜¯æº
             -æ•°æ®åœ°å€ï¼Œå‚æ•° len æ˜¯æ•°æ®é•¿åº¦ */
  25          void MemToStr(unsigned char *str, unsigned char *src, unsigned char len) {
  26   1        unsigned char tmp;
  27   1      
  28   1        while (len--) {
  29   2          tmp = *src >> 4;           // å–å‡ºé«˜ 4 ä½
  30   2          if (tmp <= 9)              // è½¬æ¢ä¸º 0-9 æˆ– A-F
  31   2            *str++ = tmp + '0';
  32   2          else
  33   2            *str++ = tmp - 10 + 'A';
  34   2      
  35   2          tmp = *src & 0x0F;         // å–å‡ºä½ 4 ä½
  36   2          if (tmp <= 9)              // è½¬æ¢ä¸º 0-9 æˆ– A-F
  37   2            *str++ = tmp + '0';
  38   2          else
  39   2            *str++ = tmp - 10 + 'A';
  40   2      
  41   2          *str++ = ' ';              // è½¬æ¢å®Œ 1 ä¸ªå­—èŠ‚å°±æ·»åŠ  1 ä¸ªç©ºæ ¼
  42   2          src++;
  43   2        }
  44   1      
  45   1        *str = '\0';                 // æ·»åŠ å­—ç¬¦ä¸²ç»“æŸç¬¦
  46   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    256    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V9.60.0.0   MAIN                                                              06/29/2021 01:09:19 PAGE 2   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      32
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
